<!DOCTYPE html>
<html lang="en" ng-app="docs">
  <head>
    
      <title>deployd</title>
    
    <link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href="../../../stylesheets/style.css" rel='stylesheet' type='text/css'>
    <link href="../../../stylesheets/prettify.css" rel='stylesheet' type='text/css'>
    <script src="../../../javascripts/libs/angular.js"></script>
    <script src="../../../javascripts/libs/angular-sanitize.js"></script>
    <script src="../../../javascripts/libs/jquery-1.8.2.js"></script>
    <script src="../../../javascripts/libs/bootstrap.js"></script>
    <script src="../../../javascripts/libs/jquery.highlight.js"></script>
    <script src="../../../javascripts/libs/jquery.masonry.js"></script>
    <script src="../../../javascripts/libs/prettify.js"></script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27539606-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  

  <body>
    <div class="navbar navbar-static-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="//deployd.com">
            <img src="//deployd.com/img/logo-text.png">
          </a>
          <div class="nav-collapse">
            <ul class="nav">
              <!--<li><a href="//cloud.deployd.com">cloud</a></li>-->
              <li class="active"><a href="//docs.deployd.com">docs</a></li>
              <li><a href="https://groups.google.com/forum/?fromgroups#!forum/deployd-users">community</a></li>
              <!--li><a href="//deployd.com/blog.html">blog</a></li-->
            </ul>
          </div><!--/.nav-collapse -->

          <div id="search" removed-ng-controller="SearchCtrl" class="pull-right">
  <form class="navbar-search" method="get" action="http://www.google.com/search">
    <input type="hidden" name="sitesearch" value="docs.deployd.com" />
    <input value="" placeholder="search docs" id="search-input" name="q" type="text" ng-change="change()" ng-model="input" />
  </form>
  <ul id="search-terms" class="typeahead unstyled" ng-show="terms.length" ng-cloak>
    <li ng-repeat="term in terms" class="{{ term.active && 'active' }}" ng-click="choose($index)">
      {{ term.title || term.reference }}
    </li>
  </ul>
</div>




          <div id="social" class="nav-collapse pull-left">
            <ul class="nav">
              <li><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.1354270846.html#_=1354747685285&amp;count=horizontal&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=http%3A%2F%2Fdeployd.com%2F&amp;size=m&amp;text=Deployd%20Platform%20(%40deploydapp)%20-%20The%20simplest%20way%20to%20build%20APIs.&amp;url=http%3A%2F%2Fwww.deployd.com" class="twitter-share-button twitter-count-horizontal" style="width: 107px; height: 20px;" title="Twitter Tweet Button" data-twttr-rendered="true"></iframe>
      <script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script id="twitter-wjs" src="//platform.twitter.com/widgets.js"></script><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="navbar navbar-static-top secondary-nav">
      <div class="navbar-inner">
        <div class="container">
          <ul class="nav">
            <li class="home"><a href="../../../">home</a></li>
            <li class="guides" ><a href="../../../guides">guides</a></li>
            <li class="api"><a href="../../../api">api</a></li>
            <li class="examples"><a href="../../../examples">examples</a></li>
            <li class="modules"><a href="../../../modules">modules</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      

<ul id="breadcrumb" class="unstyled">

  <li><a href="../../../docs">Docs</a><span>/</span></li>

  <li><a href="../../../docs/developing-modules">Developing Modules</a><span>/</span></li>

  <li>Internal API Reference</li>
  
  <li>(<a href="../../../docs/developing-modules/internal-api/include-all.html">View All</a>)</li>
  
</ul>

<div id="browser" class="row">
  <div id="sidebar" class="span3">
    

<div id="explorer">
  <ul id="files" class="nav">
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/collection.html"><i class="icon-file"></i> <span>Collection Resource Type</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/context.html"><i class="icon-file"></i> <span>Context</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/script.html"><i class="icon-file"></i> <span>Event Scripts</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/internal-client.html"><i class="icon-file"></i> <span>Internal Client</span></a></li>
    
      <li class="active"><a href="../../../docs/developing-modules/internal-api/resource.html"><i class="icon-file"></i> <span>Resource Types</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/server.html"><i class="icon-file"></i> <span>Server</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/session.html"><i class="icon-file"></i> <span>Session</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/session-store.html"><i class="icon-file"></i> <span>Session Store</span></a></li>
    
      <li class=""><a href="../../../docs/developing-modules/internal-api/store.html"><i class="icon-file"></i> <span>Store</span></a></li>
    
    
  </ul>
  
</div>


    
      <h4>Related APIs</h4>
      <div id="related-apis">
        <div id="api">
  
      
        
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/collection.html">Collection Resource Type</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.store-2358">collection.store</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.validate(body, create)-2358">collection.validate(body, create)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.sanitize(body)-2358">collection.sanitize(body)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.sanitizeQuery(query)-2358">collection.sanitizeQuery(query)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.parseId(ctx)-2358">collection.parseId(ctx)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.find(ctx, fn)-2358">collection.find(ctx, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.remove(ctx, fn)-2358">collection.remove(ctx, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/collection.html#s-collection.save(ctx, fn)-2358">collection.save(ctx, fn)</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/context.html">Context</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/context.html#s-ctx.done(err, result)-1333">ctx.done(err, result)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/context.html#s-ctx.body-1333">ctx.body</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/context.html#s-ctx.query-1333">ctx.query</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/context.html#s-ctx.method-1333">ctx.method</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/script.html">Event Scripts</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/script.html#s-script.run(ctx, domain, [fn])-1290">script.run(ctx, domain, [fn])</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/script.html#s-Script.load(path, fn)-1290">Script.load(path, fn)</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/resource.html">Resource Types</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-resource.handle(ctx, next)-1405">resource.handle(ctx, next)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-resource.load(fn)-1405">resource.load(fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-resource.clientGeneration-1405">resource.clientGeneration</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-resource.config-1405">resource.config</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-Resource.events-1405">Resource.events</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-Resource.label-1405">Resource.label</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-Resource.defaultPath-1405">Resource.defaultPath</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-Collection.basicDashboard-1405">Collection.basicDashboard</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/resource.html#s-Collection.dashboard-1405">Collection.dashboard</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/server.html">Server</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.listen([port], [host])-631">Server.listen([port], [host])</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.createStore(namespace) -631">Server.createStore(namespace) </a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.sockets-631">Server.sockets</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.sessions-631">Server.sessions</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.router-631">Server.router</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/server.html#s-Server.resources-631">Server.resources</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/session.html">Session</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.set(changes)-1332">Session.set(changes)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.save(fn)-1332">Session.save(fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.fetch(fn)-1332">Session.fetch(fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.remove(fn)-1332">Session.remove(fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.emitToAll(event, data)-1332">Session.emitToAll(event, data)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/session.html#s-Session.emitToUsers(collection, query, event, data)-1332">Session.emitToUsers(collection, query, event, data)</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/session-store.html">Session Store</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/session-store.html#s-SessionStore.createSession(sid, fn)-1857">SessionStore.createSession(sid, fn)</a></li>
    
            </ul>
            
            <ul class="nav nav-list developing-modules">
              <li class="nav-header"><a href="../../../docs/developing-modules/internal-api/store.html">Store</a></li>
            
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.insert(object, fn)-1117">Store.insert(object, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.count(query, fn)-1117">Store.count(query, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.find(query, fn)-1117">Store.find(query, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.first(query, fn)-1117">Store.first(query, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.update(query, changes, fn)-1117">Store.update(query, changes, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.remove(query, fn)-1117">Store.remove(query, fn)</a></li>
    
      <li><a href="../../../docs/developing-modules/internal-api/store.html#s-Store.rename(name, fn)-1117">Store.rename(name, fn)</a></li>
    
            </ul>
            
      
    
</div>




      </div>
    
  </div>
  <div class="span9 sections">
    
      

  <div class="section"><a name="s-Resource Types"></a><h2>Resource Types <a class="anchor-link" href="#s-Resource Types">#</a></h2>

<p>Resources are the building block of a Deployd app. They provide a way to handle http requests at a root url. They must implement a <code>handle(ctx, next)</code> method that either handles a request or calls <code>next()</code> to give the request back to the router.</p>

<p>Resources can also be attributed with meta-data to allow the dashboard to dynamically render an editor gui for configuring a resource instance.</p><div class="section"><a name="s-Events / Scripts-1405"></a><h3>Events / Scripts <a class="anchor-link" href="#s-Events / Scripts-1405">#</a></h3>

<p>A <code>Resource</code> can execute <code>Script</code>s during the handling of an http request when certain events occur. This allows users of the resource to inject logic during specific events during an http request without having to extend the resource or create their own.</p>

<p>For example, the <code>Collection</code> resource executes the <em>get.js</em> event script when it retrieves each object from its store. If a <em>get.js</em> file exists in the instance folder of a resource (eg. <code>/my-project/resources/my-collection/get.js</code>), it will be pulled in by the resource and exposed as <code>myResource.scripts.get</code>.</p></div><div class="section reference"><a name="s-Class: Resource-1405"></a><h3>Class: Resource <!-- ref --> <a class="anchor-link" href="#s-Class: Resource-1405">#</a></h3>

<p>A <code>Resource</code> inherits from <code>EventEmitter</code>. The following events are available.</p>

<ul>
<li><code>changed</code>      after a resource config has changed</li>
<li><code>deleted</code>      after a resource config has been deleted</li>
</ul>

<p>Inheriting from Resource:</p>

<pre><code>var Resource = require('deployd/lib/resource')
  , util = require('util');

function MyResource(name, options) {
  // run the parent constructor
  // before using any properties/methods
  Resource.apply(this, arguments);
}
util.inherits(MyResource, Resource);
module.exports = MyResource;
</code></pre>

<ul>
<li><code>name</code> {String}</li>
</ul>

<p>The name of the resource.</p>

<ul>
<li><p><code>options</code> {Object}</p>

<ul><li><code>configPath</code>        the project relative path to the resource instance</li>
<li><code>path</code>              the base path a resource should handle</li>
<li><code>db</code> <em>(optional)</em>   the database a resource will use for persistence</li>
<li><code>config</code>            the instance configuration object</li>
<li><code>server</code>            the server object</li></ul></li>
</ul>

<p>The following resource would respond with a file at the url <code>/my-file.html</code>.</p>

<pre><code>function MyFileResource(name, options) {
  Resource.apply(this, arguments);

  this.on('changed', function(config) {
    console.log('MyFileResource changed', config);
  });
}
util.inherits(MyFileResource, Resource);

MyFileResource.prototype.handle = function (ctx, next) {
  if (ctx.url === '/my-file.html') {
    fs.createReadStream('my-file.html').pipe(ctx.res);
  } else {
    next();
  }
}
</code></pre></div><div class="section"><a name="s-Overriding Behavior-1405"></a><h3>Overriding Behavior <a class="anchor-link" href="#s-Overriding Behavior-1405">#</a></h3>

<p>Certain methods on a <code>Resource</code> prototype are called by the runtime. Their default behavior should be overridden to define an inherited <code>Resources</code> behavior.</p></div><div class="section api"><a name="s-resource.handle(ctx, next)-1405"></a><h3>resource.handle(ctx, next) <!-- api --> <a class="anchor-link" href="#s-resource.handle(ctx, next)-1405">#</a></h3>

<p>Handle an incoming request. This gets called by the router.</p>

<p>The resource can either handle this context and call <code>ctx.done(err, obj)</code> with an error or result JSON object, or call <code>next()</code> to give the context back to the router. If a resource calls <code>next()</code> the router might find another match for the request, or respond with a <code>404</code>.</p>

<ul>
<li>ctx {<a href="../../../docs/developing-modules/internal-api/context.html">Context</a>}</li>
</ul>

<p>The http context created by the <code>Router</code>. This provides an abstraction between the actual request and response. A <code>Resource</code> should call <code>ctx.done</code> or pipe to <code>ctx.res</code> if it can handle a request. Otherwise it should call <code>next()</code>.</p>

<p>Override the handle method to return a string:</p>

<pre><code>function MyResource(settings) {
  Resource.apply(this, arguments);
}
util.inherits(MyResource, Resource);

MyResource.prototype.handle = function (ctx, next) {
  // respond with the file contents (or an error if one occurs)
  fs.readFile('myfile.txt', ctx.done);
}
</code></pre></div><div class="section api"><a name="s-resource.load(fn)-1405"></a><h3>resource.load(fn) <!-- api --> <a class="anchor-link" href="#s-resource.load(fn)-1405">#</a></h3>

<p>Load any dependencies and call <code>fn(err)</code> with any errors that occur. This is automatically called by the runtime to support asynchronous construction of a resource (such as loading files).</p>

<p><em>Note: If this method is overridden, the super method must be called to support loading of the <code>MyResource.events</code> array.</em></p></div><div class="section api"><a name="s-resource.clientGeneration-1405"></a><h3>resource.clientGeneration <!-- api --> <a class="anchor-link" href="#s-resource.clientGeneration-1405">#</a></h3>

<p>If <code>true</code>, ensures that this resource is included in <code>dpd.js</code>.</p>

<pre><code>MyResource.prototype.clientGeneration = true;
</code></pre></div><div class="section api"><a name="s-resource.config-1405"></a><h3>resource.config <!-- api --> <a class="anchor-link" href="#s-resource.config-1405">#</a></h3>

<p>The instance configuration object; used to access the resource's configuration from member functions.</p>

<pre><code>MyResource.prototype.handle = function (ctx, next) {
  fs.readFile(this.config.filePath, ctx.done);
}
</code></pre></div><div class="section reference"><a name="s-External Prototype -1405"></a><h3>External Prototype  <!-- ref --> <a class="anchor-link" href="#s-External Prototype -1405">#</a></h3>

<p>This is a special type of prototype object that is used to build the <code>dpd</code> object. Each function on the <code>Resource.external</code> prototype <code>Object</code> are exposed externally in two places</p>

<ol>
<li>To the generated <code>dpd.js</code> browser JavaScript client</li>
<li>To the <code>Context.dpd</code> object generated for inter-resource calls</li>
</ol>

<p>Here is an example of a simple resource that exposes a method on the external prototype.</p>

<p><code>/my-project/node_modules/example.js</code></p>

<pre><code>var util = require('util');
var Resource = require('deployd/lib/resource');
function Example(name, options) {
  Resource.apply(this, arguments);
}
util.inherits(Example, Resource);

Example.external = {};

Example.external.hello = function(options, ctx, fn) {
  console.log(options.msg); // 'hello world'
}
</code></pre>

<p>When the <code>hello()</code> method is called, a context does not need to be provided as the <code>dpd</code> object is built with a context. A callback may be provided which will be executed with results of <code>fn(err, result)</code>.</p>

<p><code>/my-project/public/hello.js</code></p>

<pre><code>dpd.example.hello({msg: 'hello world'});
</code></pre>

<p><code>/my-project/resources/other-resource/get.js</code></p>

<pre><code>dpd.example.hello({msg: 'hello world'});
</code></pre></div><div class="section api"><a name="s-Resource.events-1405"></a><h3>Resource.events <!-- api --> <a class="anchor-link" href="#s-Resource.events-1405">#</a></h3>

<ul>
<li>{Array}</li>
</ul>

<p>If a <code>Resource</code> constructor includes an array of events, it will try to load the scripts in its instance folder (eg. <code>/my-project/resources/my-resource/get.js</code>) using <a href="../../../#s-resource.load-fn">resource.loadScripts(eventNames, fn)</a>.</p>

<pre><code>MyResource.events = ['get'];
</code></pre>

<p>This will be available to each instance of this resource as <code>this.events</code>. </p>

<p><code>/my-project/node_modules/my-resource.js</code></p>

<pre><code>MyResource.prototype.handle = function(ctx, next) {
  if(this.events &amp;&amp; this.events.get) {
    var domain = {
      say: function(msg) {
        console.log(msg); // 'hello world'
      }
    }
    this.events.get.run(ctx, domain, ctx.done);
  }
}
</code></pre>

<p><code>/my-project/resources/my-resource/get.js</code></p>

<pre><code>say('hello world');
</code></pre></div><div class="section api"><a name="s-Resource.label-1405"></a><h3>Resource.label <!-- api --> <a class="anchor-link" href="#s-Resource.label-1405">#</a></h3>

<p>The resource type's name as it appears in the dashboard. If this is not set, it will appear with its constructor name.</p>

<pre><code>Hello.label = 'Hello World';
</code></pre></div><div class="section api"><a name="s-Resource.defaultPath-1405"></a><h3>Resource.defaultPath <!-- api --> <a class="anchor-link" href="#s-Resource.defaultPath-1405">#</a></h3>

<p>The default path suggested to users creating a resource. If this is not set, it will use the constructor's name in lowercase.</p>

<pre><code>Hello.defaultPath = '/hello-world'; 
</code></pre></div><div class="section api"><a name="s-Collection.basicDashboard-1405"></a><h3>Collection.basicDashboard <!-- api --> <a class="anchor-link" href="#s-Collection.basicDashboard-1405">#</a></h3>

<p>Set this property to an object to create a custom configuration page for your resource type.</p>

<ul>
<li><code>settings</code> - An array of objects describing which properties to display. </li>
<li><code>name</code> - The name of the property. This is how the value will be passed into the <code>config</code> object, so make sure it's something JavaScript-friendly, e.g. <code>maxItems</code>.</li>
<li><code>type</code> - The type of control to edit this property. Allowed types are <code>text</code>, <code>textarea</code>, <code>number</code>, and <code>checkbox</code>.</li>
<li><code>description</code> (Optional) - Explanatory text to appear below the field.</li>
</ul>

<!-- separate -->

<pre><code>Hello.basicDashboard = {
  settings: [{
      name: 'propertyName',
      type: 'text',
      description: "This description appears below the text field"
  }, {
      name: 'longTextProperty',
      type: 'textarea'
  }, {
      name: 'numericProperty',
      type: 'number'
  }, {
      name: 'booleanProperty',
      type: 'checkbox'
  }]
};
</code></pre>

<p>The above sample will produce the following dashboard page:</p>

<p><img src="../../../images/basic-dashboard.png" alt="Example basic dashboard" title="" /></p></div><div class="section api"><a name="s-Collection.dashboard-1405"></a><h3>Collection.dashboard <!-- api --> <a class="anchor-link" href="#s-Collection.dashboard-1405">#</a></h3>

<p>A resource can describe the dependencies of a fully custom dashboard editor UI. This will be passed to the dashboard during rendering to create a custom UI.</p>

<p>This example creates the custom dashboard for the <code>Collection</code> resource. It automatically includes pages and page-specific scripts:</p>

<pre><code>Collection.dashboard = {
    path: path.join(__dirname, 'dashboard')
  , pages: ['Properties', 'Data', 'Events', 'API']
  , scripts: [
      '/js/ui.js'
    , '/js/util.js'
  ]
}
</code></pre>

<ul>
<li><code>path</code> {String}</li>
</ul>

<p>The absolute path to this resource's dashboard</p>

<ul>
<li><code>pages</code> {Array} <em>(optional)</em></li>
</ul>

<p>An array of pages to appear in the sidebar. If this is not provided, the only page available will be "Config" (and "Events", if <code>MyResource.events</code> is set).</p>

<p>The dashboard will load content from <code>[current-page].html</code> and <code>js/[current-page].js</code>.</p>

<p><em>Note: The "Config" page will load from <code>index.html</code> and <code>js/index.js</code>.</em></p>

<ul>
<li><code>scripts</code> {Array} <em>(optional)</em></li>
</ul>

<p>An array of extra JavaScript files to load with the dashboard pages.</p><div class="section reference"><a name="s-Dashboard asset loading-2018"></a><h4>Dashboard asset loading <!-- ref --> <a class="anchor-link" href="#s-Dashboard asset loading-2018">#</a></h4>

<p>When you request a page from a custom dashboard, it will load the following files, if they are available, from the <code>dashboard.path</code>:</p>

<ul>
<li><code>[current-page].html</code></li>
<li><code>js/[current-page].js</code></li>
<li><code>style.css</code></li>
</ul>

<p>The default page is <code>index</code>; the <code>config</code> page will also redirect to <code>index</code>. </p>

<p>The <code>config</code> or <code>index</code> page will load the basic dashboard if no <code>index.html</code> file is provided.
The <code>events</code> page will load the default event editor if no <code>events.html</code> file is provided.</p>

<p>It will also load the JavaScript files in the <code>dashboard.scripts</code> property.</p></div><div class="section"><a name="s-Creating a custom dashboard-2018"></a><h4>Creating a custom dashboard <a class="anchor-link" href="#s-Creating a custom dashboard-2018">#</a></h4><div class="section reference"><a name="s-Event editor control-2609"></a><h5>Event editor control <!-- ref --> <a class="anchor-link" href="#s-Event editor control-2609">#</a></h5>

<p>To embed the event editor in your dashboard, include this empty div:</p>

<pre><code>&lt;div id="event-editor" class="default-editor"&gt;&lt;/div&gt;
</code></pre></div><div class="section reference"><a name="s-Styling-2609"></a><h5>Styling <!-- ref --> <a class="anchor-link" href="#s-Styling-2609">#</a></h5>

<p>For styling, the dashboard uses a re-skinned version of <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2.0.2</a>. </p></div><div class="section reference"><a name="s-JavaScript-2609"></a><h5>JavaScript <!-- ref --> <a class="anchor-link" href="#s-JavaScript-2609">#</a></h5>

<p>The dashboard provides several JavaScript libraries by default:</p>

<ul>
<li><a href="http://jquery.com/">jQuery 1.7.2</a></li>
<li><a href="https://github.com/carhartl/jquery-cookie/">jquery.cookie</a></li>
<li><a href="http://underscorejs.org/">Underscore 1.3.3</a></li>
<li><a href="http://twitter.github.com/bootstrap/javascript.html">Twitter Bootstrap 2.0.2</a></li>
<li><a href="http://visionmedia.github.com/uikit/">UIKit</a></li>
<li><a href="https://github.com/ajaxorg/ace">Ace Editor</a> (no-conflict version)
<ul><li>JavaScript mode</li>
<li>JSON mode</li>
<li>Custom theme for the Dashboard (<code>ace/theme/deployd</code>)</li></ul></li>
<li><a href="http://code.google.com/p/google-code-prettify/">Google Code Prettify</a></li>
<li>dpd.js
<ul><li><em>Note:</em> all dpd.js requests will be sent as <a href="../../../docs/collections/reference/http.html#s-root-requests">root</a></li></ul></li>
</ul>

<p>Within the dashboard, a <code>Context</code> object is available:</p>

<pre><code>//Automatically generated by Deployd:
window.Context = {
  resourceId: '/hello', // The id of the current resource
  resourceType: 'Hello', // The type of the current resource
  page: 'properties', // The current page, in multi-page dashboards
  basicDashboard: {} // The configuration of the basic dashboard
};
</code></pre>

<p>You can use this to query the current resource:</p>

<pre><code>dpd(Context.resourceId).get(function(result, err) {
  //Do something
});
</code></pre>

<p>In the dashboard, you also have access to the special <code>__resources</code> resource, which lets you update your app's configuration files:</p>

<pre><code>// Get the config for the current resource
dpd('__resources').get(Context.resourceId, function(result, err) {
  //Do something
});

// Set a property for the current resource
dpd('__resources').put(Context.resourceId, {someProperty: true}, function(result, err) {
  //Do something
});

// Set all properties for the current resource, deleting any that are not provided
dpd('__resources').put(Context.resourceId, {someProperty: true, $setAll: true}, function(result, err) {
  //Do something
});

// Save another file, which will be loaded by the resource
dpd('__resources').post(Context.resourceId + '/content.md', {value: "# Hello World!"}, function(result, err)) {
  //Do something
});
</code></pre></div></div></div></div>  

    
    <h3 style="text-align: center;">More</h3>

    
    
    <div class="row-fluid">
      <div class="span6">
        <div class="well">
          <h4>Other docs in "Internal API Reference"</h4>
          <ul>
            
              <li><a href="../../../docs/developing-modules/internal-api/collection.html">Collection Resource Type</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/context.html">Context</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/script.html">Event Scripts</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/internal-client.html">Internal Client</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/server.html">Server</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/session.html">Session</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/session-store.html">Session Store</a></li>
            
              <li><a href="../../../docs/developing-modules/internal-api/store.html">Store</a></li>
            
          </ul>
        </div>
      </div>
       
        <div class="span6">
          <div class="well">
            <h4>Related Examples</h4>
            <ul>
              
                <li><a href="../../../docs/developing-modules/examples/email.html">Email Resource</a></li>
              
                <li><a href="../../../docs/developing-modules/examples/event.html">Event Resource</a></li>
              
                <li><a href="../../../docs/developing-modules/examples/s3.html">S3 Bucket Resource</a></li>
              
            </ul>
          </div>
        </div>
      
    </div>
  </div>
</div>
    </div>
    
    <div class="docs-nav">
      <div class="container">
        <div class="row">
          <div class="span3">
            <h3>Guides</h3>
            <ul class="nav nav-list">
              
                <li><a href="../../../docs/getting-started">Getting Started</a></li>
              
                <li><a href="../../../docs/basics">Basics</a></li>
              
                <li><a href="../../../docs/collections">Collections</a></li>
              
                <li><a href="../../../docs/users">Users</a></li>
              
                <li><a href="../../../docs/using-modules">Using Modules</a></li>
              
                <li><a href="../../../docs/server">The Deployd Server</a></li>
              
                <li><a href="../../../docs/developing-modules">Developing Modules</a></li>
              
            </ul>
          </div>
          <div class="span3">
            <h3>APIs</h3>
            <ul class="nav nav-list">
              
                <li class="nav-header"><a href="../../../docs/collections/reference">Collections</a></li>
                
                  <li><a href="../../../docs/collections/reference/event-api.html">Event API</a></li>
                
                  <li><a href="../../../docs/collections/reference/http.html">Over HTTP</a></li>
                
                  <li><a href="../../../docs/collections/reference/querying-collections.html">Querying Collections</a></li>
                
                  <li><a href="../../../docs/collections/reference/updating-objects.html">Updating Objects in Collections</a></li>
                
                  <li><a href="../../../docs/collections/reference/dpd-js.html">Using dpd.js</a></li>
                
              
                <li class="nav-header"><a href="../../../docs/using-modules/reference">Using Modules</a></li>
                
                  <li><a href="../../../docs/using-modules/reference/dpd-js.html">Dpd.js for Custom Resources</a></li>
                
                  <li><a href="../../../docs/using-modules/reference/event-api.html">Event API for Custom Resources</a></li>
                
              
                <li class="nav-header"><a href="../../../docs/developing-modules/internal-api">Developing Modules</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/collection.html">Collection Resource Type</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/context.html">Context</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/script.html">Event Scripts</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/internal-client.html">Internal Client</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/resource.html">Resource Types</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/server.html">Server</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/session.html">Session</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/session-store.html">Session Store</a></li>
                
                  <li><a href="../../../docs/developing-modules/internal-api/store.html">Store</a></li>
                
              
            </ul>
          </div>
          <div class="span3">
            <h3>Examples</h3>
            <ul class="nav nav-list">
              
                <li class="nav-header"><a href="../../../docs/collections">Collections</a></li>
                
                  <li><a href="../../../docs">A Simple Todo App</a></li>
                
                  <li><a href="../../../docs">A Simple Todo App with AngularJS</a></li>
                
                  <li><a href="../../../docs">A Simple Todo App with Backbone.js</a></li>
                
                  <li><a href="../../../docs">Chatroom</a></li>
                
              
                <li class="nav-header"><a href="../../../docs/users">Users</a></li>
                
                  <li><a href="../../../docs">Microblogging app</a></li>
                
                  <li><a href="../../../docs">Simple Login Form</a></li>
                
              
                <li class="nav-header"><a href="../../../docs/developing-modules">Developing Modules</a></li>
                
                  <li><a href="../../../docs">Email Resource</a></li>
                
                  <li><a href="../../../docs">Event Resource</a></li>
                
                  <li><a href="../../../docs">S3 Bucket Resource</a></li>
                
              
            </ul>
          </div>
          <div class="span3">
            <div id="feedback">
              <h3>Feedback</h3>
              <p>Let us know if you have any ideas to improve our docs. Open an <a href="https://github.com/deployd/docs/issues">issue on github</a>, <a href="mailto: hello@deployd.com">send us an email</a>, or <a href="https://twitter.com/deploydapp">tweet us</a>.</p>
            </div>
            <div id="download">
              <h3>Edit or Download these Docs</h3>
              <p>This entire site, including documentation written in markdown is <a href="https://github.com/deployd/docs">available on github</a>. Pull requests are appreciated!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="row">
          <div class="span navigation">
            <dl>
              <dt><img src="//deployd.com/img/footer-dt.png" alt="deployd"></dt>
              <dd><a href="http://deployd.com/">Home</a></dd>
              <dd><a href="http://deployd.com/video.html">Screencast</a></dd>
              <dd><a href="http://deployd.com/features.html">Features</a></dd>
              <dd><a href="https://github.com/deployd/deployd/issues">Support</a></dd>
            </dl>
            <dl>
              <dt>documentation</dt>
              <dd><a href="http://docs.deployd.com/guides">Guides</a></dd>
              <dd><a href="http://docs.deployd.com/api">API</a></dd>
              <dd><a href="http://docs.deployd.com/examples">Examples</a></dd>
              <dd><a href="http://docs.deployd.com/modules">Modules</a></dd>
            </dl>
            <dl>
              <dt>community</dt>
              <dd><a href="http://deployd.com/community.html">Questions</a></dd>
              <dd><a href="https://twitter.com/deploydapp">Tweets</a></dd>
              <dd><a href="https://github.com/deployd/deployd/issues">Issues</a></dd>
              <dd><a href="https://github.com/deployd/deployd">Github</a></dd>
            </dl>
            <dl>
              <dt>contact</dt>
              <dd><a href="mailto:hello@deployd.com">hello@deployd.com</a></dd>
            </dl>
          </div>
          <div class="span logo-container">
            <div class="logo">
              <img src="//deployd.com/img/footer-logo.png" alt="deployd">
            </div>
          </div>
          <div class="span email-container">
            <dl id="mc_embed_signup" class="span4">
            <dt>Get deployd emails</dt>
            <dd>
              <form action="http://deployd.us2.list-manage.com/subscribe/post?u=4f1b944ba8c90738eb8e3fa3c&amp;id=7bb18e6b80" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-vertical" target="_blank" novalidate="">
              <div class="mc-field-group">
                <input type="email" placeholder="your@email" value="" name="EMAIL" class="required email" id="mce-EMAIL"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button btn">
              </div>
                <div id="mce-responses" class="clear">
                  <div class="response" id="mce-error-response" style="display:none"></div>
                  <div class="response" id="mce-success-response" style="display:none"></div>
                </div>
              </form>
            </dd>
          </dl>
          </div>
        </div>
      </div>
    </footer>
    <script src="../../../javascripts/app.js"></script>
  </body>
</html>
